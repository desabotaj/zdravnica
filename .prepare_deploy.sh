#!/bin/bash
# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ðº Ð´ÐµÐ¿Ð»Ð¾ÑŽ
# Ð£Ð´Ð°Ð»ÑÐµÑ‚ Ð½ÐµÐ½ÑƒÐ¶Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ Ð°Ñ€Ñ…Ð¸Ð²

echo "ðŸ“¦ ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ðº Ð´ÐµÐ¿Ð»Ð¾ÑŽ..."

# Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ
mkdir -p deploy_package

# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
echo "ðŸ“‹ ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²..."
cp production_server.py deploy_package/
cp index.html deploy_package/
cp admin.html deploy_package/
cp requirements.txt deploy_package/
cp runtime.txt deploy_package/

# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ð°Ð¿ÐºÑƒ styles
cp -r styles deploy_package/

# Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ README Ð´Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ
cat > deploy_package/README_DEPLOY.txt << EOF
TechRepair CRM - Ð¤Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ

Ð˜ÐÐ¡Ð¢Ð Ð£ÐšÐ¦Ð˜Ð¯:
1. Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³
2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Python Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ (Ð²ÐµÑ€ÑÐ¸Ñ 3.10+)
3. Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ñ‚Ð¾Ñ‡ÐºÑƒ Ð²Ñ…Ð¾Ð´Ð°: production_server.py
4. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ:
   PORT=8001
   HOST=0.0.0.0
5. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ

Ð’ÐÐ–ÐÐž:
- Ð¤Ð°Ð¹Ð»Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… (*_data.json) ÑÐ¾Ð·Ð´Ð°Ð´ÑƒÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
- Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ñƒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ ÐµÑÑ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð° Ð½Ð° Ð·Ð°Ð¿Ð¸ÑÑŒ
- Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ HTTPS

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ: DEPLOY_RU.md
EOF

# Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð°Ñ€Ñ…Ð¸Ð²
echo "ðŸ“¦ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ð²Ð°..."
cd deploy_package
zip -r ../techrepair_deploy.zip .
cd ..

echo "âœ… Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! ÐÑ€Ñ…Ð¸Ð²: techrepair_deploy.zip"
echo "ðŸ“ Ð¤Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ Ð² Ð¿Ð°Ð¿ÐºÐµ: deploy_package/"

